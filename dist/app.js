!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function replacer(key,value){return util.isUndefined(value)?""+value:util.isNumber(value)&&!isFinite(value)?value.toString():util.isFunction(value)||util.isRegExp(value)?value.toString():value}function truncate(s,n){return util.isString(s)?s.length<n?s:s.slice(0,n):s}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}function ok(value,message){value||fail(value,!0,message,"==",assert.ok)}function _deepEqual(actual,expected){if(actual===expected)return!0;if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return!1;for(var i=0;i<actual.length;i++)if(actual[i]!==expected[i])return!1;return!0}return util.isDate(actual)&&util.isDate(expected)?actual.getTime()===expected.getTime():util.isRegExp(actual)&&util.isRegExp(expected)?actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase:util.isObject(actual)||util.isObject(expected)?objEquiv(actual,expected):actual==expected}function isArguments(object){return"[object Arguments]"==Object.prototype.toString.call(object)}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return!1;if(aIsArgs)return a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b);var key,i,ka=objectKeys(a),kb=objectKeys(b);if(ka.length!=kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key]))return!1;return!0}function expectedException(actual,expected){return!(!actual||!expected)&&("[object RegExp]"==Object.prototype.toString.call(expected)?expected.test(actual):actual instanceof expected||expected.call({},actual)===!0)}function _throws(shouldThrow,block,expected,message){var actual;util.isString(expected)&&(message=expected,expected=null);try{block()}catch(e){actual=e}if(message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:"."),shouldThrow&&!actual&&fail(actual,expected,"Missing expected exception"+message),!shouldThrow&&expectedException(actual,expected)&&fail(actual,expected,"Got unwanted exception"+message),shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(options){this.name="AssertionError",this.actual=options.actual,this.expected=options.expected,this.operator=options.operator,options.message?(this.message=options.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction);else{var err=new Error;if(err.stack){var out=err.stack,fn_name=stackStartFunction.name,idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(actual,expected,message){actual!=expected&&fail(actual,expected,message,"==",assert.equal)},assert.notEqual=function(actual,expected,message){actual==expected&&fail(actual,expected,message,"!=",assert.notEqual)},assert.deepEqual=function(actual,expected,message){_deepEqual(actual,expected)||fail(actual,expected,message,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(actual,expected,message){_deepEqual(actual,expected)&&fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(actual,expected,message){actual!==expected&&fail(actual,expected,message,"===",assert.strictEqual)},assert.notStrictEqual=function(actual,expected,message){actual===expected&&fail(actual,expected,message,"!==",assert.notStrictEqual)},assert.throws=function(block,error,message){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(block,message){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)hasOwn.call(obj,key)&&keys.push(key);return keys}},{"util/":29}],2:[function(require,module,exports){function dispatcher(handlers){function setModel(model){assert.equal(typeof model,"object","barracks.store.model: model should be an object"),models.push(model)}function getState(opts){if(opts=opts||{},assert.equal(typeof opts,"object","barracks.store.state: opts should be an object"),opts.state){const initialState={},nsState={};return models.forEach(function(model){const ns=model.namespace,modelState=model.state||{};ns?(nsState[ns]={},apply(ns,modelState,nsState),nsState[ns]=xtend(nsState[ns],opts.state[ns])):apply(model.namespace,modelState,initialState)}),xtend(_state,xtend(opts.state,nsState))}return opts.freeze===!1?xtend(_state):Object.freeze(xtend(_state))}function start(opts){function createSend(selfName,callOnError){return assert.equal(typeof selfName,"string","barracks.store.start.createSend: selfName should be a string"),assert.ok(!callOnError||"boolean"==typeof callOnError,"barracks.store.start.send: callOnError should be undefined or a boolean"),function(name,data,cb){function onErrorCallback(err){err=err||null,err&&onError(err,_state,function(selfName){return function(name,data){assert.equal(typeof name,"string","barracks.store.start.send: name should be a string"),data="undefined"==typeof data?null:data,_send(name,data,selfName,done)}})}cb||callOnError||(cb=data,data=null),data="undefined"==typeof data?null:data,assert.equal(typeof name,"string","barracks.store.start.send: name should be a string"),assert.ok(!cb||"function"==typeof cb,"barracks.store.start.send: cb should be a function");const done=callOnError?onErrorCallback:cb;_send(name,data,selfName,done)}}function _send(name,data,caller,cb){assert.equal(typeof name,"string","barracks._send: name should be a string"),assert.equal(typeof caller,"string","barracks._send: caller should be a string"),assert.equal(typeof cb,"function","barracks._send: cb should be a function"),setTimeout(function(){var reducersCalled=!1,effectsCalled=!1;const newState=xtend(_state);onAction&&onAction(data,_state,name,caller,createSend);var actionName=name;if(/:/.test(name)){const arr=name.split(":");var ns=arr.shift();actionName=arr.join(":")}const _reducers=ns?reducers[ns]:reducers;if(_reducers&&_reducers[actionName]){if(ns){const reducedState=_reducers[actionName](data,_state[ns]);mutate(newState[ns],xtend(_state[ns],reducedState))}else mutate(newState,reducers[actionName](data,_state));reducersCalled=!0,onStateChange&&onStateChange(data,newState,_state,actionName,createSend),_state=newState,cb()}const _effects=ns?effects[ns]:effects;if(!reducersCalled&&_effects&&_effects[actionName]){const send=createSend("effect: "+name);ns?_effects[actionName](data,_state[ns],send,cb):_effects[actionName](data,_state,send,cb),effectsCalled=!0}if(!reducersCalled&&!effectsCalled)throw new Error("Could not find action "+actionName)},0)}return opts=opts||{},assert.equal(typeof opts,"object","barracks.store.start: opts should be undefined or an object"),models.forEach(function(model){const ns=model.namespace;!stateCalled&&model.state&&opts.state!==!1&&apply(ns,model.state,_state),!reducersCalled&&model.reducers&&opts.reducers!==!1&&apply(ns,model.reducers,reducers),!effectsCalled&&model.effects&&opts.effects!==!1&&apply(ns,model.effects,effects),!subsCalled&&model.subscriptions&&opts.subscriptions!==!1&&apply(ns,model.subscriptions,subscriptions,createSend,onError)}),opts.noState||(stateCalled=!0),opts.noReducers||(reducersCalled=!0),opts.noEffects||(effectsCalled=!0),opts.noSubscriptions||(subsCalled=!0),createSend}handlers=handlers||{},assert.equal(typeof handlers,"object","barracks: handlers should be undefined or an object");const onError=wrapOnError(handlers.onError||defaultOnError),onAction=handlers.onAction,onStateChange=handlers.onStateChange;assert.ok(!handlers.onError||"function"==typeof handlers.onError,"barracks: onError should be undefined or a function"),assert.ok(!onAction||"function"==typeof onAction,"barracks: onAction should be undefined or a function"),assert.ok(!onStateChange||"function"==typeof onStateChange,"barracks: onStateChange should be undefined or a function");var reducersCalled=!1,effectsCalled=!1,stateCalled=!1,subsCalled=!1;const subscriptions=start._subscriptions={},reducers=start._reducers={},effects=start._effects={},models=start._models=[];var _state={};return start.model=setModel,start.state=getState,start.start=start,start}function apply(ns,source,target,createSend,done){Object.keys(source).forEach(function(key){if(ns?(target[ns]||(target[ns]={}),target[ns][key]=source[key]):target[key]=source[key],createSend&&done){const send=createSend("subscription: "+(ns?ns+":"+key:key));source[key](send,done)}})}function defaultOnError(err){throw err}function wrapOnError(onError){return function(err){err&&onError(err)}}const mutate=require("xtend/mutable"),assert=require("assert"),xtend=require("xtend");module.exports=dispatcher},{assert:1,xtend:32,"xtend/mutable":33}],3:[function(require,module,exports){function belCreateElement(tag,props,children){function appendChild(childs){if(Array.isArray(childs))for(var i=0;i<childs.length;i++){var node=childs[i];if(Array.isArray(node))appendChild(node);else{if(("number"==typeof node||"boolean"==typeof node||node instanceof Date||node instanceof RegExp)&&(node=node.toString()),"string"==typeof node){if(el.lastChild&&"#text"===el.lastChild.nodeName){el.lastChild.nodeValue+=node;continue}node=document.createTextNode(node)}node&&node.nodeType&&el.appendChild(node)}}}var el;SVG_TAGS.indexOf(tag)!==-1&&(props.namespace=SVGNS);var ns=!1;if(props.namespace&&(ns=props.namespace,delete props.namespace),el=ns?document.createElementNS(ns,tag):document.createElement(tag),props.onload||props.onunload){var load=props.onload||function(){},unload=props.onunload||function(){};onload(el,function(){load(el)},function(){unload(el)},belCreateElement.caller.caller.caller),delete props.onload,delete props.onunload}for(var p in props)if(props.hasOwnProperty(p)){var key=p.toLowerCase(),val=props[p];if("classname"===key&&(key="class",p="class"),"htmlFor"===p&&(p="for"),BOOL_PROPS[key])if("true"===val)val=key;else if("false"===val)continue;"on"===key.slice(0,2)?el[p]=val:ns?el.setAttributeNS(null,p,val):el.setAttribute(p,val)}return appendChild(children),el}var document=require("global/document"),hyperx=require("hyperx"),onload=require("on-load"),SVGNS="http://www.w3.org/2000/svg",BOOL_PROPS={autofocus:1,checked:1,defaultchecked:1,disabled:1,formnovalidate:1,indeterminate:1,readonly:1,required:1,selected:1,willvalidate:1},SVG_TAGS=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];module.exports=hyperx(belCreateElement),module.exports.createElement=belCreateElement},{"global/document":11,hyperx:15,"on-load":19}],4:[function(require,module,exports){},{}],5:[function(require,module,exports){function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=cachedSetTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,cachedClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||cachedSetTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],6:[function(require,module,exports){function chooLog(){function onAction(data,state,name,trace,createSend){function logInner(name,action){console.log("action name:",name),console.log("data:",data)}const split=trace.split(":"),actionType=split[0].trim(),caller=split[1].trim(),line=[];colorify("lightGray",renderTime(startTime)+" ",line),colorify("gray",renderType("action")+" ",line),colorify("gray",renderActionType(actionType)+" ",line),colorify("default","'"+caller+"'",line),colorify("default","->",line),colorify("default","'"+name+"'",line),console.groupCollapsed?(logGroup(line),logInner(name,data),console.groupEnd()):(log(line),logInner(name,data))}function onError(err,state,createSend){function logInner(err){console.error(err)}const line=[];colorify("lightGray",renderTime(startTime)+" ",line),colorify("red",renderType("error")+" ",line),colorify("default",err.message+" ",line),console.groupCollapsed?(logGroup(line),logInner(err),console.groupEnd()):(log(line),logInner(err))}function onStateChange(data,state,prev,createSend){function logInner(prev,state){console.log("prev ",prev),console.log("state",state),hasWarn?console.warn("diff ","There is no difference between states"):console.log("diff ",diff)}const diff=deepDiff(prev,state)||[],hasWarn=0===diff.length,inlineText=function(diff){return hasWarn?"no diff":1===diff.length?"diff":"diffs"}(diff),line=[];colorify("lightGray",renderTime(startTime)+" ",line),colorify(hasWarn?"yellow":"gray",renderType("state")+" ",line),colorify("default",(hasWarn?"":diff.length+" ")+inlineText,line),console.groupCollapsed?(logGroup(line),logInner(prev,state),console.groupEnd()):(log(line),logInner(prev,state))}const startTime=Date.now();return{onAction:onAction,onError:onError,onStateChange:onStateChange}}function logGroup(line){console.groupCollapsed.apply(console,line)}function log(line){console.log.apply(console,line)}function renderType(msg){const leftPad=paddings.type,rightPad=paddings.actionType+leftPad+2;return"state"===msg||"error"===msg?padRight(padLeft(msg,leftPad," "),rightPad," "):padLeft(msg,leftPad," ")}function renderActionType(msg){const padding=paddings.actionType;return"subscription"===msg&&(msg="subs"),padRight(msg,padding," ")}function colorify(color,line,prev){return prev?(prev[0]||(prev[0]=""),prev[0]=prev[0]+=" %c"+line,prev.push("color: "+colors[color]),prev):["%c"+line,"color: "+colors[color]]}function renderTime(startTime){var offset=String(Math.round((Date.now()-startTime)/1e3)%1e4),msg="["+padLeft(offset,4,"0")+"]";return msg}const deepDiff=require("deep-diff"),padRight=require("pad-right"),padLeft=require("pad-left");module.exports=chooLog;const colors={green:"#2ECC40",red:"#FF4136",blue:"#7FDBFF",lightGray:"#DDDDDD",gray:"#AAAAAA",yellow:"#FFDC00",default:"#293037"},paddings={type:7,actionType:7}},{"deep-diff":9,"pad-left":20,"pad-right":21}],7:[function(require,module,exports){module.exports=require("yo-yo")},{"yo-yo":34}],8:[function(require,module,exports){function choo(opts){function toString(route,serverState){function createSend(){return function(){assert.fail("choo: send() cannot be called from Node")}}serverState=serverState||{},assert.equal(typeof route,"string","choo.app.toString: route must be a string"),assert.equal(typeof serverState,"object","choo.app.toString: serverState must be an object"),_store.start({subscriptions:!1,reducers:!1,effects:!1});const state=_store.state({state:serverState}),router=createRouter(_defaultRoute,_routes,createSend),tree=router(route,state);return tree.outerHTML||tree.toString()}function start(selector,startOpts){startOpts||"string"==typeof selector||(startOpts=selector,selector=null),startOpts=startOpts||{},_store.model(appInit(startOpts));const createSend=_store.start(startOpts);_router=start._router=createRouter(_defaultRoute,_routes,createSend);const state=_store.state({state:{}});if(!selector){const tree=_router(state.location.pathname,state);return _rootNode=tree,tree}onReady(function(){const oldTree=document.querySelector(selector);assert.ok(oldTree,"could not query selector: "+selector);const newTree=_router(state.location.pathname,state);_rootNode=yo.update(oldTree,newTree)})}function render(data,state,prev,name,createSend){opts.onStateChange&&opts.onStateChange(data,state,prev,name,createSend);const newTree=_router(state.location.pathname,state,prev);_rootNode=yo.update(_rootNode,newTree)}function router(defaultRoute,routes){_defaultRoute=defaultRoute,_routes=routes}function model(model){_store.model(model)}function createRouter(defaultRoute,routes,createSend){function createRoute(routeFn){function wrap(child,route){const send=createSend("view: "+route,!0);return function(params,state){const nwPrev=prev,nwState=prev=xtend(state,{params:params});return opts.freeze!==!1&&Object.freeze(nwState),child(nwState,nwPrev,send)}}return function(route,inline,child){return"function"==typeof inline&&(inline=wrap(inline,route)),routeFn(route,inline,child)}}var prev={};return sheetRouter(defaultRoute,routes,createRoute)}opts=opts||{};const _store=start._store=barracks(xtend(opts,{onStateChange:render}));var _router=start._router=null,_defaultRoute=null,_rootNode=null,_routes=null;return start.toString=toString,start.router=router,start.model=model,start.start=start,start}function appInit(opts){function pushLocationSub(cb,key,model){model[key]=function(send,done){cb(function(pathname){send("location:setLocation",{location:pathname},done)})}}const loc=document.location,state={pathname:opts.hash?hashMatch(loc.hash):loc.href},reducers={setLocation:function(data,state){return{pathname:data.location.replace(/#.*/,"")}}},subs={};return opts.hash===!0?pushLocationSub(function(navigate){hash(function(fragment){navigate(hashMatch(fragment))})},"handleHash",subs):(opts.history!==!1&&pushLocationSub(history,"handleHistory",subs),opts.href!==!1&&pushLocationSub(href,"handleHref",subs)),{namespace:"location",subscriptions:subs,reducers:reducers,state:state}}const history=require("sheet-router/history"),sheetRouter=require("sheet-router"),document=require("global/document"),onReady=require("document-ready"),href=require("sheet-router/href"),hash=require("sheet-router/hash"),hashMatch=require("hash-match"),barracks=require("barracks"),assert=require("assert"),xtend=require("xtend"),yo=require("yo-yo");module.exports=choo},{assert:1,barracks:2,"document-ready":10,"global/document":11,"hash-match":13,"sheet-router":27,"sheet-router/hash":24,"sheet-router/history":25,"sheet-router/href":26,xtend:32,"yo-yo":34}],9:[function(require,module,exports){(function(global){!function(root,factory){"use strict";"function"==typeof define&&define.amd?define([],function(){return factory()}):"object"==typeof exports?module.exports=factory():root.DeepDiff=factory()}(this,function(undefined){"use strict";function inherits(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}function Diff(kind,path){Object.defineProperty(this,"kind",{value:kind,enumerable:!0}),path&&path.length&&Object.defineProperty(this,"path",{value:path,enumerable:!0})}function DiffEdit(path,origin,value){DiffEdit.super_.call(this,"E",path),Object.defineProperty(this,"lhs",{value:origin,enumerable:!0}),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffNew(path,value){DiffNew.super_.call(this,"N",path),Object.defineProperty(this,"rhs",{value:value,enumerable:!0})}function DiffDeleted(path,value){DiffDeleted.super_.call(this,"D",path),Object.defineProperty(this,"lhs",{value:value,enumerable:!0})}function DiffArray(path,index,item){DiffArray.super_.call(this,"A",path),Object.defineProperty(this,"index",{value:index,enumerable:!0}),Object.defineProperty(this,"item",{value:item,enumerable:!0})}function arrayRemove(arr,from,to){var rest=arr.slice((to||from)+1||arr.length);return arr.length=from<0?arr.length+from:from,arr.push.apply(arr,rest),arr}function realTypeOf(subject){var type=typeof subject;return"object"!==type?type:subject===Math?"math":null===subject?"null":Array.isArray(subject)?"array":"[object Date]"===Object.prototype.toString.call(subject)?"date":"undefined"!=typeof subject.toString&&/^\/.*\//.test(subject.toString())?"regexp":"object"}function deepDiff(lhs,rhs,changes,prefilter,path,key,stack){path=path||[];var currentPath=path.slice(0);if("undefined"!=typeof key){if(prefilter){if("function"==typeof prefilter&&prefilter(currentPath,key))return;if("object"==typeof prefilter){if(prefilter.prefilter&&prefilter.prefilter(currentPath,key))return;if(prefilter.normalize){var alt=prefilter.normalize(currentPath,key,lhs,rhs);alt&&(lhs=alt[0],rhs=alt[1])}}}currentPath.push(key)}"regexp"===realTypeOf(lhs)&&"regexp"===realTypeOf(rhs)&&(lhs=lhs.toString(),rhs=rhs.toString());var ltype=typeof lhs,rtype=typeof rhs;if("undefined"===ltype)"undefined"!==rtype&&changes(new DiffNew(currentPath,rhs));else if("undefined"===rtype)changes(new DiffDeleted(currentPath,lhs));else if(realTypeOf(lhs)!==realTypeOf(rhs))changes(new DiffEdit(currentPath,lhs,rhs));else if("[object Date]"===Object.prototype.toString.call(lhs)&&"[object Date]"===Object.prototype.toString.call(rhs)&&lhs-rhs!==0)changes(new DiffEdit(currentPath,lhs,rhs));else if("object"===ltype&&null!==lhs&&null!==rhs){if(stack=stack||[],stack.indexOf(lhs)<0){if(stack.push(lhs),Array.isArray(lhs)){var i;lhs.length;for(i=0;i<lhs.length;i++)i>=rhs.length?changes(new DiffArray(currentPath,i,new DiffDeleted(undefined,lhs[i]))):deepDiff(lhs[i],rhs[i],changes,prefilter,currentPath,i,stack);for(;i<rhs.length;)changes(new DiffArray(currentPath,i,new DiffNew(undefined,rhs[i++])))}else{var akeys=Object.keys(lhs),pkeys=Object.keys(rhs);akeys.forEach(function(k,i){var other=pkeys.indexOf(k);other>=0?(deepDiff(lhs[k],rhs[k],changes,prefilter,currentPath,k,stack),pkeys=arrayRemove(pkeys,other)):deepDiff(lhs[k],undefined,changes,prefilter,currentPath,k,stack)}),pkeys.forEach(function(k){deepDiff(undefined,rhs[k],changes,prefilter,currentPath,k,stack)})}stack.length=stack.length-1}}else lhs!==rhs&&("number"===ltype&&isNaN(lhs)&&isNaN(rhs)||changes(new DiffEdit(currentPath,lhs,rhs)))}function accumulateDiff(lhs,rhs,prefilter,accum){return accum=accum||[],deepDiff(lhs,rhs,function(diff){diff&&accum.push(diff)},prefilter),accum.length?accum:undefined}function applyArrayChange(arr,index,change){if(change.path&&change.path.length){var i,it=arr[index],u=change.path.length-1;for(i=0;i<u;i++)it=it[change.path[i]];switch(change.kind){case"A":applyArrayChange(it[change.path[i]],change.index,change.item);break;case"D":delete it[change.path[i]];break;case"E":case"N":it[change.path[i]]=change.rhs}}else switch(change.kind){case"A":applyArrayChange(arr[index],change.index,change.item);break;case"D":arr=arrayRemove(arr,index);break;case"E":case"N":arr[index]=change.rhs}return arr}function applyChange(target,source,change){if(target&&source&&change&&change.kind){for(var it=target,i=-1,last=change.path?change.path.length-1:0;++i<last;)"undefined"==typeof it[change.path[i]]&&(it[change.path[i]]="number"==typeof change.path[i]?[]:{}),it=it[change.path[i]];switch(change.kind){case"A":applyArrayChange(change.path?it[change.path[i]]:it,change.index,change.item);break;case"D":delete it[change.path[i]];break;case"E":case"N":it[change.path[i]]=change.rhs}}}function revertArrayChange(arr,index,change){if(change.path&&change.path.length){var i,it=arr[index],u=change.path.length-1;for(i=0;i<u;i++)it=it[change.path[i]];switch(change.kind){case"A":revertArrayChange(it[change.path[i]],change.index,change.item);break;case"D":it[change.path[i]]=change.lhs;break;case"E":it[change.path[i]]=change.lhs;break;case"N":delete it[change.path[i]]}}else switch(change.kind){case"A":revertArrayChange(arr[index],change.index,change.item);break;case"D":arr[index]=change.lhs;break;case"E":arr[index]=change.lhs;break;case"N":arr=arrayRemove(arr,index)}return arr}function revertChange(target,source,change){if(target&&source&&change&&change.kind){var i,u,it=target;for(u=change.path.length-1,i=0;i<u;i++)"undefined"==typeof it[change.path[i]]&&(it[change.path[i]]={}),it=it[change.path[i]];switch(change.kind){case"A":revertArrayChange(it[change.path[i]],change.index,change.item);break;case"D":it[change.path[i]]=change.lhs;break;case"E":it[change.path[i]]=change.lhs;break;case"N":delete it[change.path[i]]}}}function applyDiff(target,source,filter){if(target&&source){var onChange=function(change){filter&&!filter(target,source,change)||applyChange(target,source,change)};deepDiff(target,source,onChange)}}var $scope,conflict,conflictResolution=[];return $scope="object"==typeof global&&global?global:"undefined"!=typeof window?window:{},conflict=$scope.DeepDiff,conflict&&conflictResolution.push(function(){"undefined"!=typeof conflict&&$scope.DeepDiff===accumulateDiff&&($scope.DeepDiff=conflict,conflict=undefined)}),inherits(DiffEdit,Diff),inherits(DiffNew,Diff),inherits(DiffDeleted,Diff),inherits(DiffArray,Diff),Object.defineProperties(accumulateDiff,{diff:{value:accumulateDiff,enumerable:!0},observableDiff:{value:deepDiff,enumerable:!0},applyDiff:{value:applyDiff,enumerable:!0},applyChange:{value:applyChange,enumerable:!0},revertChange:{value:revertChange,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof conflict},enumerable:!0},noConflict:{value:function(){return conflictResolution&&(conflictResolution.forEach(function(it){it()}),conflictResolution=null),accumulateDiff},enumerable:!0}}),accumulateDiff})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(require,module,exports){"use strict";function ready(callback){return"complete"===document.readyState?setTimeout(callback,0):void document.addEventListener("DOMContentLoaded",function(){callback()})}function noop(){}var document=require("global/document");module.exports=document.addEventListener?ready:noop},{"global/document":11}],11:[function(require,module,exports){(function(global){var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=require("min-document");if("undefined"!=typeof document)module.exports=document;else{var doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];doccy||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":4}],12:[function(require,module,exports){(function(global){"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(require,module,exports){module.exports=function(hash,prefix){var pre=prefix||"/";return 0===hash.length?pre:(hash=hash.replace("#",""),hash=hash.replace(/\/$/,""),0!=hash.indexOf("/")&&(hash="/"+hash),"/"==pre?hash:hash.replace(pre,""))}},{}],14:[function(require,module,exports){function attributeToProperty(h){return function(tagName,attrs,children){for(var attr in attrs)attr in transform&&(attrs[transform[attr]]=attrs[attr],delete attrs[attr]);return h(tagName,attrs,children)}}module.exports=attributeToProperty;var transform={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},{}],15:[function(require,module,exports){function quot(state){return state===ATTR_VALUE_SQ||state===ATTR_VALUE_DQ}function selfClosing(tag){return closeRE.test(tag)}var attrToProp=require("hyperscript-attribute-to-property"),VAR=0,TEXT=1,OPEN=2,CLOSE=3,ATTR=4,ATTR_KEY=5,ATTR_KEY_W=6,ATTR_VALUE_W=7,ATTR_VALUE=8,ATTR_VALUE_SQ=9,ATTR_VALUE_DQ=10,ATTR_EQ=11,ATTR_BREAK=12;module.exports=function(h,opts){function strfn(x){return"function"==typeof x?x:"string"==typeof x?x:x&&"object"==typeof x?x:concat("",x)}h=attrToProp(h),opts||(opts={});var concat=opts.concat||function(a,b){return String(a)+String(b)};return function(strings){function parse(str){var res=[];state===ATTR_VALUE_W&&(state=ATTR);for(var i=0;i<str.length;i++){var c=str.charAt(i);state===TEXT&&"<"===c?(reg.length&&res.push([TEXT,reg]),reg="",state=OPEN):">"!==c||quot(state)?state===TEXT?reg+=c:state===OPEN&&/\s/.test(c)?(res.push([OPEN,reg]),reg="",state=ATTR):state===OPEN?reg+=c:state===ATTR&&/[\w-]/.test(c)?(state=ATTR_KEY,reg=c):state===ATTR&&/\s/.test(c)?(reg.length&&res.push([ATTR_KEY,reg]),res.push([ATTR_BREAK])):state===ATTR_KEY&&/\s/.test(c)?(res.push([ATTR_KEY,reg]),reg="",state=ATTR_KEY_W):state===ATTR_KEY&&"="===c?(res.push([ATTR_KEY,reg],[ATTR_EQ]),reg="",state=ATTR_VALUE_W):state===ATTR_KEY?reg+=c:state!==ATTR_KEY_W&&state!==ATTR||"="!==c?state!==ATTR_KEY_W&&state!==ATTR||/\s/.test(c)?state===ATTR_VALUE_W&&'"'===c?state=ATTR_VALUE_DQ:state===ATTR_VALUE_W&&"'"===c?state=ATTR_VALUE_SQ:state===ATTR_VALUE_DQ&&'"'===c?(res.push([ATTR_VALUE,reg],[ATTR_BREAK]),reg="",state=ATTR):state===ATTR_VALUE_SQ&&"'"===c?(res.push([ATTR_VALUE,reg],[ATTR_BREAK]),reg="",state=ATTR):state!==ATTR_VALUE_W||/\s/.test(c)?state===ATTR_VALUE&&/\s/.test(c)?(res.push([ATTR_VALUE,reg],[ATTR_BREAK]),reg="",state=ATTR):state!==ATTR_VALUE&&state!==ATTR_VALUE_SQ&&state!==ATTR_VALUE_DQ||(reg+=c):(state=ATTR_VALUE,i--):(res.push([ATTR_BREAK]),/[\w-]/.test(c)?(reg+=c,state=ATTR_KEY):state=ATTR):(res.push([ATTR_EQ]),
state=ATTR_VALUE_W):(state===OPEN?res.push([OPEN,reg]):state===ATTR_KEY?res.push([ATTR_KEY,reg]):state===ATTR_VALUE&&reg.length&&res.push([ATTR_VALUE,reg]),res.push([CLOSE]),reg="",state=TEXT)}return state===TEXT&&reg.length?(res.push([TEXT,reg]),reg=""):state===ATTR_VALUE&&reg.length?(res.push([ATTR_VALUE,reg]),reg=""):state===ATTR_VALUE_DQ&&reg.length?(res.push([ATTR_VALUE,reg]),reg=""):state===ATTR_VALUE_SQ&&reg.length?(res.push([ATTR_VALUE,reg]),reg=""):state===ATTR_KEY&&(res.push([ATTR_KEY,reg]),reg=""),res}for(var state=TEXT,reg="",arglen=arguments.length,parts=[],i=0;i<strings.length;i++)if(i<arglen-1){var arg=arguments[i+1],p=parse(strings[i]),xstate=state;xstate===ATTR_VALUE_DQ&&(xstate=ATTR_VALUE),xstate===ATTR_VALUE_SQ&&(xstate=ATTR_VALUE),xstate===ATTR_VALUE_W&&(xstate=ATTR_VALUE),xstate===ATTR&&(xstate=ATTR_KEY),p.push([VAR,xstate,arg]),parts.push.apply(parts,p)}else parts.push.apply(parts,parse(strings[i]));for(var tree=[null,{},[]],stack=[[tree,-1]],i=0;i<parts.length;i++){var cur=stack[stack.length-1][0],p=parts[i],s=p[0];if(s===OPEN&&/^\//.test(p[1])){var ix=stack[stack.length-1][1];stack.length>1&&(stack.pop(),stack[stack.length-1][0][2][ix]=h(cur[0],cur[1],cur[2].length?cur[2]:void 0))}else if(s===OPEN){var c=[p[1],{},[]];cur[2].push(c),stack.push([c,cur[2].length-1])}else if(s===ATTR_KEY||s===VAR&&p[1]===ATTR_KEY){for(var copyKey,key="";i<parts.length;i++)if(parts[i][0]===ATTR_KEY)key=concat(key,parts[i][1]);else{if(parts[i][0]!==VAR||parts[i][1]!==ATTR_KEY)break;if("object"!=typeof parts[i][2]||key)key=concat(key,parts[i][2]);else for(copyKey in parts[i][2])parts[i][2].hasOwnProperty(copyKey)&&!cur[1][copyKey]&&(cur[1][copyKey]=parts[i][2][copyKey])}parts[i][0]===ATTR_EQ&&i++;for(var j=i;i<parts.length;i++)if(parts[i][0]===ATTR_VALUE||parts[i][0]===ATTR_KEY)cur[1][key]?cur[1][key]=concat(cur[1][key],parts[i][1]):cur[1][key]=strfn(parts[i][1]);else{if(parts[i][0]!==VAR||parts[i][1]!==ATTR_VALUE&&parts[i][1]!==ATTR_KEY){!key.length||cur[1][key]||i!==j||parts[i][0]!==CLOSE&&parts[i][0]!==ATTR_BREAK||(cur[1][key]=key.toLowerCase());break}cur[1][key]?cur[1][key]=concat(cur[1][key],parts[i][2]):cur[1][key]=strfn(parts[i][2])}}else if(s===ATTR_KEY)cur[1][p[1]]=!0;else if(s===VAR&&p[1]===ATTR_KEY)cur[1][p[2]]=!0;else if(s===CLOSE){if(selfClosing(cur[0])&&stack.length){var ix=stack[stack.length-1][1];stack.pop(),stack[stack.length-1][0][2][ix]=h(cur[0],cur[1],cur[2].length?cur[2]:void 0)}}else if(s===VAR&&p[1]===TEXT)void 0===p[2]||null===p[2]?p[2]="":p[2]||(p[2]=concat("",p[2])),Array.isArray(p[2][0])?cur[2].push.apply(cur[2],p[2]):cur[2].push(p[2]);else if(s===TEXT)cur[2].push(p[1]);else if(s!==ATTR_EQ&&s!==ATTR_BREAK)throw new Error("unhandled: "+s)}if(tree[2].length>1&&/^\s*$/.test(tree[2][0])&&tree[2].shift(),tree[2].length>2||2===tree[2].length&&/\S/.test(tree[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(tree[2][0])&&"string"==typeof tree[2][0][0]&&Array.isArray(tree[2][0][2])&&(tree[2][0]=h(tree[2][0][0],tree[2][0][1],tree[2][0][2])),tree[2][0]}};var closeRE=(Object.prototype.hasOwnProperty,RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"))},{"hyperscript-attribute-to-property":14}],16:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],17:[function(require,module,exports){function createStyleElement(){var styleElement=document.createElement("style");return styleElement.setAttribute("type","text/css"),styleElement}var containers=[],styleElements=[];module.exports=function(css,options){options=options||{};var position=options.prepend===!0?"prepend":"append",container=void 0!==options.container?options.container:document.querySelector("head"),containerId=containers.indexOf(container);containerId===-1&&(containerId=containers.push(container)-1,styleElements[containerId]={});var styleElement;return void 0!==styleElements[containerId]&&void 0!==styleElements[containerId][position]?styleElement=styleElements[containerId][position]:(styleElement=styleElements[containerId][position]=createStyleElement(),"prepend"===position?container.insertBefore(styleElement,container.childNodes[0]):container.appendChild(styleElement)),styleElement.styleSheet?styleElement.styleSheet.cssText+=css:styleElement.textContent+=css,styleElement}},{}],18:[function(require,module,exports){function empty(o){for(var k in o)if(o.hasOwnProperty(k))return!1;return!0}function toElement(str){!range&&document.createRange&&(range=document.createRange(),range.selectNode(document.body));var fragment;return range&&range.createContextualFragment?fragment=range.createContextualFragment(str):(fragment=document.createElement("body"),fragment.innerHTML=str),fragment.childNodes[0]}function noop(){}function createElementNS(name,namespaceURI){return namespaceURI&&namespaceURI!==XHTML?document.createElementNS(namespaceURI,name):document.createElement(name)}function morphAttrs(fromNode,toNode){var i,attr,attrName,attrNamespaceURI,attrValue,fromValue,attrs=toNode.attributes;for(i=attrs.length-1;i>=0;i--)attr=attrs[i],attrName=attr.name,attrValue=attr.value,attrNamespaceURI=attr.namespaceURI,attrNamespaceURI?(attrName=attr.localName||attrName,fromValue=fromNode.getAttributeNS(attrNamespaceURI,attrName)):fromValue=fromNode.getAttribute(attrName),fromValue!==attrValue&&(attrNamespaceURI?fromNode.setAttributeNS(attrNamespaceURI,attrName,attrValue):fromNode.setAttribute(attrName,attrValue));for(attrs=fromNode.attributes,i=attrs.length-1;i>=0;i--)attr=attrs[i],attr.specified!==!1&&(attrName=attr.name,attrNamespaceURI=attr.namespaceURI,hasAttributeNS(toNode,attrNamespaceURI,attrNamespaceURI?attrName=attr.localName||attrName:attrName)||fromNode.removeAttributeNode(attr))}function moveChildren(fromEl,toEl){for(var curChild=fromEl.firstChild;curChild;){var nextChild=curChild.nextSibling;toEl.appendChild(curChild),curChild=nextChild}return toEl}function defaultGetNodeKey(node){return node.id}function morphdom(fromNode,toNode,options){function removeNodeHelper(node,nestedInSavedEl){var id=getNodeKey(node);if(id?savedEls[id]=node:nestedInSavedEl||onNodeDiscarded(node),node.nodeType===ELEMENT_NODE)for(var curChild=node.firstChild;curChild;)removeNodeHelper(curChild,nestedInSavedEl||id),curChild=curChild.nextSibling}function walkDiscardedChildNodes(node){if(node.nodeType===ELEMENT_NODE)for(var curChild=node.firstChild;curChild;)getNodeKey(curChild)||(onNodeDiscarded(curChild),walkDiscardedChildNodes(curChild)),curChild=curChild.nextSibling}function removeNode(node,parentNode,alreadyVisited){onBeforeNodeDiscarded(node)!==!1&&(parentNode.removeChild(node),alreadyVisited?getNodeKey(node)||(onNodeDiscarded(node),walkDiscardedChildNodes(node)):removeNodeHelper(node))}function morphEl(fromEl,toEl,alreadyVisited,childrenOnly){var toElKey=getNodeKey(toEl);if(toElKey&&delete savedEls[toElKey],!childrenOnly){if(onBeforeElUpdated(fromEl,toEl)===!1)return;if(morphAttrs(fromEl,toEl),onElUpdated(fromEl),onBeforeElChildrenUpdated(fromEl,toEl)===!1)return}if("TEXTAREA"!==fromEl.nodeName){var curToNodeId,fromNextSibling,toNextSibling,savedEl,unmatchedEl,curToNodeChild=toEl.firstChild,curFromNodeChild=fromEl.firstChild;outer:for(;curToNodeChild;){for(toNextSibling=curToNodeChild.nextSibling,curToNodeId=getNodeKey(curToNodeChild);curFromNodeChild;){var curFromNodeId=getNodeKey(curFromNodeChild);if(fromNextSibling=curFromNodeChild.nextSibling,!alreadyVisited&&curFromNodeId&&(unmatchedEl=unmatchedEls[curFromNodeId]))unmatchedEl.parentNode.replaceChild(curFromNodeChild,unmatchedEl),morphEl(curFromNodeChild,unmatchedEl,alreadyVisited),curFromNodeChild=fromNextSibling;else{var curFromNodeType=curFromNodeChild.nodeType;if(curFromNodeType===curToNodeChild.nodeType){var isCompatible=!1;if(curFromNodeType===ELEMENT_NODE?(compareNodeNames(curFromNodeChild,curToNodeChild)&&(curFromNodeId||curToNodeId?curToNodeId===curFromNodeId&&(isCompatible=!0):isCompatible=!0),isCompatible&&morphEl(curFromNodeChild,curToNodeChild,alreadyVisited)):curFromNodeType!==TEXT_NODE&&curFromNodeType!=COMMENT_NODE||(isCompatible=!0,curFromNodeChild.nodeValue=curToNodeChild.nodeValue),isCompatible){curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling;continue outer}}removeNode(curFromNodeChild,fromEl,alreadyVisited),curFromNodeChild=fromNextSibling}}curToNodeId&&((savedEl=savedEls[curToNodeId])?compareNodeNames(savedEl,curToNodeChild)?(morphEl(savedEl,curToNodeChild,!0),curToNodeChild=savedEl):(delete savedEls[curToNodeId],onNodeDiscarded(savedEl)):unmatchedEls[curToNodeId]=curToNodeChild),onBeforeNodeAdded(curToNodeChild)!==!1&&(fromEl.appendChild(curToNodeChild),onNodeAdded(curToNodeChild)),curToNodeChild.nodeType===ELEMENT_NODE&&(curToNodeId||curToNodeChild.firstChild)&&movedEls.push(curToNodeChild),curToNodeChild=toNextSibling,curFromNodeChild=fromNextSibling}for(;curFromNodeChild;)fromNextSibling=curFromNodeChild.nextSibling,removeNode(curFromNodeChild,fromEl,alreadyVisited),curFromNodeChild=fromNextSibling}var specialElHandler=specialElHandlers[fromEl.nodeName];specialElHandler&&specialElHandler(fromEl,toEl)}if(options||(options={}),"string"==typeof toNode)if("#document"===fromNode.nodeName||"HTML"===fromNode.nodeName){var toNodeHtml=toNode;toNode=document.createElement("html"),toNode.innerHTML=toNodeHtml}else toNode=toElement(toNode);var savedEls={},unmatchedEls={},getNodeKey=options.getNodeKey||defaultGetNodeKey,onBeforeNodeAdded=options.onBeforeNodeAdded||noop,onNodeAdded=options.onNodeAdded||noop,onBeforeElUpdated=options.onBeforeElUpdated||options.onBeforeMorphEl||noop,onElUpdated=options.onElUpdated||noop,onBeforeNodeDiscarded=options.onBeforeNodeDiscarded||noop,onNodeDiscarded=options.onNodeDiscarded||noop,onBeforeElChildrenUpdated=options.onBeforeElChildrenUpdated||options.onBeforeMorphElChildren||noop,childrenOnly=options.childrenOnly===!0,movedEls=[],morphedNode=fromNode,morphedNodeType=morphedNode.nodeType,toNodeType=toNode.nodeType;if(!childrenOnly)if(morphedNodeType===ELEMENT_NODE)toNodeType===ELEMENT_NODE?compareNodeNames(fromNode,toNode)||(onNodeDiscarded(fromNode),morphedNode=moveChildren(fromNode,createElementNS(toNode.nodeName,toNode.namespaceURI))):morphedNode=toNode;else if(morphedNodeType===TEXT_NODE||morphedNodeType===COMMENT_NODE){if(toNodeType===morphedNodeType)return morphedNode.nodeValue=toNode.nodeValue,morphedNode;morphedNode=toNode}if(morphedNode===toNode)onNodeDiscarded(fromNode);else{morphEl(morphedNode,toNode,!1,childrenOnly);var handleMovedEl=function(el){for(var curChild=el.firstChild;curChild;){var nextSibling=curChild.nextSibling,key=getNodeKey(curChild);if(key){var savedEl=savedEls[key];if(savedEl&&compareNodeNames(curChild,savedEl)){if(curChild.parentNode.replaceChild(savedEl,curChild),morphEl(savedEl,curChild,!0),curChild=nextSibling,empty(savedEls))return!1;continue}}curChild.nodeType===ELEMENT_NODE&&handleMovedEl(curChild),curChild=nextSibling}};if(!empty(savedEls))handleMovedElsLoop:for(;movedEls.length;){var movedElsTemp=movedEls;movedEls=[];for(var i=0;i<movedElsTemp.length;i++)if(handleMovedEl(movedElsTemp[i])===!1)break handleMovedElsLoop}for(var savedElId in savedEls)if(savedEls.hasOwnProperty(savedElId)){var savedEl=savedEls[savedElId];onNodeDiscarded(savedEl),walkDiscardedChildNodes(savedEl)}}return!childrenOnly&&morphedNode!==fromNode&&fromNode.parentNode&&fromNode.parentNode.replaceChild(morphedNode,fromNode),morphedNode}var range,hasAttributeNS,testEl="undefined"!=typeof document?document.body||document.createElement("div"):{},XHTML="http://www.w3.org/1999/xhtml",ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8;hasAttributeNS=testEl.hasAttributeNS?function(el,namespaceURI,name){return el.hasAttributeNS(namespaceURI,name)}:testEl.hasAttribute?function(el,namespaceURI,name){return el.hasAttribute(name)}:function(el,namespaceURI,name){return!!el.getAttributeNode(name)};var specialElHandlers={OPTION:function(fromEl,toEl){fromEl.selected=toEl.selected,fromEl.selected?fromEl.setAttribute("selected",""):fromEl.removeAttribute("selected","")},INPUT:function(fromEl,toEl){fromEl.checked=toEl.checked,fromEl.checked?fromEl.setAttribute("checked",""):fromEl.removeAttribute("checked"),fromEl.value!==toEl.value&&(fromEl.value=toEl.value),hasAttributeNS(toEl,null,"value")||fromEl.removeAttribute("value"),fromEl.disabled=toEl.disabled,fromEl.disabled?fromEl.setAttribute("disabled",""):fromEl.removeAttribute("disabled")},TEXTAREA:function(fromEl,toEl){var newValue=toEl.value;fromEl.value!==newValue&&(fromEl.value=newValue),fromEl.firstChild&&(fromEl.firstChild.nodeValue=newValue)}},compareNodeNames=function(a,b){return a.nodeName===b.nodeName&&a.namespaceURI===b.namespaceURI};module.exports=morphdom},{}],19:[function(require,module,exports){function turnon(index,el){watch[index][0]&&0===watch[index][2]&&(watch[index][0](el),watch[index][2]=1)}function turnoff(index,el){watch[index][1]&&1===watch[index][2]&&(watch[index][1](el),watch[index][2]=0)}function eachAttr(mutation,on,off){var newValue=mutation.target.getAttribute(KEY_ATTR);return sameOrigin(mutation.oldValue,newValue)?void(watch[newValue]=watch[mutation.oldValue]):(watch[mutation.oldValue]&&off(mutation.oldValue,mutation.target),void(watch[newValue]&&on(newValue,mutation.target)))}function sameOrigin(oldValue,newValue){return!(!oldValue||!newValue)&&watch[oldValue][3]===watch[newValue][3]}function eachMutation(nodes,fn){for(var keys=Object.keys(watch),i=0;i<nodes.length;i++){if(nodes[i]&&nodes[i].getAttribute&&nodes[i].getAttribute(KEY_ATTR)){var onloadid=nodes[i].getAttribute(KEY_ATTR);keys.forEach(function(k){onloadid===k&&fn(k,nodes[i])})}nodes[i].childNodes.length>0&&eachMutation(nodes[i].childNodes,fn)}}var document=require("global/document"),window=require("global/window"),watch=Object.create(null),KEY_ID="onloadid"+(new Date%9e6).toString(36),KEY_ATTR="data-"+KEY_ID,INDEX=0;if(window&&window.MutationObserver){var observer=new MutationObserver(function(mutations){if(!(Object.keys(watch).length<1))for(var i=0;i<mutations.length;i++)mutations[i].attributeName!==KEY_ATTR?(eachMutation(mutations[i].removedNodes,turnoff),eachMutation(mutations[i].addedNodes,turnon)):eachAttr(mutations[i],turnon,turnoff)});observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[KEY_ATTR]})}module.exports=function onload(el,on,off,caller){return on=on||function(){},off=off||function(){},el.setAttribute(KEY_ATTR,"o"+INDEX),watch["o"+INDEX]=[on,off,0,caller||onload.caller],INDEX+=1,el}},{"global/document":11,"global/window":12}],20:[function(require,module,exports){"use strict";var repeat=require("repeat-string");module.exports=function(str,num,ch){return str=str.toString(),"undefined"==typeof num?str:(ch=0===ch?"0":ch?ch.toString():" ",repeat(ch,num-str.length)+str)}},{"repeat-string":23}],21:[function(require,module,exports){"use strict";var repeat=require("repeat-string");module.exports=function(val,num,str){var padding="",diff=num-val.length;if(diff<=5&&!str)padding="00000";else{if(!(diff<=25)||str)return val+repeat(str||"0",diff);padding="000000000000000000000000000"}return val+padding.slice(0,diff)}},{"repeat-string":23}],22:[function(require,module,exports){function match(route){return assert.equal(typeof route,"string"),route.trim().replace(/[\?|#].*$/,"").replace(/^(?:https?\:)\/\//,"").replace(/^(?:[\w+(?:-\w+)+.])+(?:[\:0-9]{4,5})?/,"").replace(/\/$/,"")}const assert=require("assert");module.exports=match},{assert:1}],23:[function(require,module,exports){"use strict";function repeat(str,num){if("string"!=typeof str)throw new TypeError("repeat-string expects a string.");if(1===num)return str;if(2===num)return str+str;var max=str.length*num;for(cache===str&&"undefined"!=typeof cache||(cache=str,res="");max>res.length&&num>0&&(1&num&&(res+=str),num>>=1);)str+=str;return res.substr(0,max)}var cache,res="";module.exports=repeat},{}],24:[function(require,module,exports){function hash(cb){assert.equal(typeof cb,"function","cb must be a function"),window.onhashchange=function(e){cb(window.location.hash)}}const window=require("global/window"),assert=require("assert");module.exports=hash},{assert:1,"global/window":12}],25:[function(require,module,exports){function history(cb){assert.equal(typeof cb,"function","cb must be a function"),window.onpopstate=function(){cb(document.location.href)}}const document=require("global/document"),window=require("global/window"),assert=require("assert");module.exports=history},{assert:1,"global/document":11,"global/window":12}],26:[function(require,module,exports){function href(cb){assert.equal(typeof cb,"function","cb must be a function"),window.onclick=function(e){const node=function traverse(node){if(node)return"a"!==node.localName?traverse(node.parentNode):void 0===node.href?traverse(node.parentNode):window.location.host!==node.host?traverse(node.parentNode):node}(e.target);if(node){e.preventDefault();const href=node.href.replace(/#$/,"");cb(href),window.history.pushState({},null,href)}}}const window=require("global/window"),assert=require("assert");module.exports=href},{assert:1,"global/window":12}],27:[function(require,module,exports){function sheetRouter(dft,createTree,createRoute){createRoute=createRoute?createRoute(_createRoute):_createRoute,createTree||(createTree=dft,dft=""),assert.equal(typeof dft,"string","sheet-router: dft must be a string"),assert.equal(typeof createTree,"function","sheet-router: createTree must be a function"),assert.equal(typeof createRoute,"function","sheet-router: createRoute must be a function");const router=wayfarer(dft),tree=createTree(createRoute);return function walk(tree,route){if(Array.isArray(tree[0]))tree.forEach(function(node){walk(node,route)});else if(tree[1]){const innerRoute=tree[0]?route.concat(tree[0]).join("/"):route.length?route.join("/"):tree[0];router.on(innerRoute,tree[1]),walk(tree[2],route.concat(tree[0]))}else if(Array.isArray(tree[2]))walk(tree[2],route.concat(tree[0]));else{const nwRoute=tree[0]?route.concat(tree[0]).join("/"):route.length?route.join("/"):tree[0];router.on(nwRoute,tree[2])}}(tree,[]),function(route){assert.equal(typeof route,"string","route must be a string");const args=[].slice.call(arguments);return args[0]=pathname(args[0]),router.apply(null,args)}}function _createRoute(route,inline,child){return child||(child=inline,inline=null),assert.equal(typeof route,"string","route must be a string"),assert.ok(child,"child exists"),route=route.replace(/^\//,""),[route,inline,child]}const pathname=require("pathname-match"),wayfarer=require("wayfarer"),assert=require("assert");module.exports=sheetRouter},{assert:1,"pathname-match":22,wayfarer:30}],28:[function(require,module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},{}],29:[function(require,module,exports){(function(process,global){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":28,_process:5,inherits:16}],30:[function(require,module,exports){function Wayfarer(dft){function on(route,cb){if(assert.equal(typeof route,"string"),assert.equal(typeof cb,"function"),route=route||"/",cb&&cb._wayfarer&&cb._trie)_trie.mount(route,cb._trie.trie);else{const node=_trie.create(route);node.cb=cb}return emit}function emit(route){assert.notEqual(route,void 0,"'route' must be defined");const args=Array.prototype.slice.apply(arguments),node=_trie.match(route);if(node&&node.cb)return args[0]=node.params,node.cb.apply(null,args);const dft=_trie.match(_default);if(dft&&dft.cb)return args[0]=dft.params,dft.cb.apply(null,args);throw new Error("route '"+route+"' did not match")}if(!(this instanceof Wayfarer))return new Wayfarer(dft);const _default=(dft||"").replace(/^\//,""),_trie=trie();return emit._trie=_trie,emit.emit=emit,emit.on=on,emit._wayfarer=!0,emit}const assert=require("assert"),trie=require("./trie");module.exports=Wayfarer},{"./trie":31,assert:1}],31:[function(require,module,exports){function Trie(){return this instanceof Trie?void(this.trie={nodes:{}}):new Trie}const mutate=require("xtend/mutable"),assert=require("assert"),xtend=require("xtend");module.exports=Trie,Trie.prototype.create=function(route){assert.equal(typeof route,"string","route should be a string");const routes=route.replace(/^\//,"").split("/");return function createNode(index,trie,routes){const route=routes[index];if(void 0===route)return trie;var node=null;return/^:/.test(route)?(trie.nodes.$$?node=trie.nodes.$$:(node={nodes:{}},trie.nodes.$$=node),trie.name=route.replace(/^:/,"")):trie.nodes[route]?node=trie.nodes[route]:(node={nodes:{}},trie.nodes[route]=node),createNode(index+1,node,routes)}(0,this.trie,routes)},Trie.prototype.match=function(route){assert.equal(typeof route,"string","route should be a string");const routes=route.replace(/^\//,"").split("/"),params={};var node=function search(index,trie){if(void 0!==trie){const route=routes[index];return void 0===route?trie:trie.nodes[route]?search(index+1,trie.nodes[route]):trie.name?(params[trie.name]=route,search(index+1,trie.nodes.$$)):search(index+1)}}(0,this.trie);if(node)return node=xtend(node),node.params=params,node},Trie.prototype.mount=function(route,trie){assert.equal(typeof route,"string","route should be a string"),assert.equal(typeof trie,"object","trie should be a object");const split=route.replace(/^\//,"").split("/");var node=null,key=null;if(1===split.length)key=split[0],node=this.create(key);else{const headArr=split.splice(0,split.length-1),head=headArr.join("/");key=split[0],node=this.create(head)}mutate(node.nodes,trie.nodes),trie.name&&(node.name=trie.name),node.nodes[""]&&(Object.keys(node.nodes[""]).forEach(function(key){"nodes"!==key&&(node[key]=node.nodes[""][key])}),mutate(node.nodes,node.nodes[""].nodes),delete node.nodes[""].nodes)}},{assert:1,xtend:32,"xtend/mutable":33}],32:[function(require,module,exports){function extend(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty},{}],
33:[function(require,module,exports){function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty},{}],34:[function(require,module,exports){var bel=require("bel"),morphdom=require("morphdom"),defaultEvents=require("./update-events.js");module.exports=bel,module.exports.update=function(fromNode,toNode,opts){function copier(f,t){for(var events=opts.events||defaultEvents,i=0;i<events.length;i++){var ev=events[i];t[ev]?f[ev]=t[ev]:f[ev]&&(f[ev]=void 0)}("INPUT"===f.nodeName&&"file"!==f.type||"TEXTAREA"===f.nodeName||"SELECT"===f.nodeName)&&null===t.getAttribute("value")&&(t.value=f.value)}return opts||(opts={}),opts.events!==!1&&(opts.onBeforeMorphEl||(opts.onBeforeMorphEl=copier)),morphdom(fromNode,toNode,opts)}},{"./update-events.js":35,bel:3,morphdom:18}],35:[function(require,module,exports){module.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"]},{}],36:[function(require,module,exports){"use strict";var choo=require("choo"),mainView=require("./views/main"),gameView=require("./views/game"),chooLog=require("choo-log");(require("insert-css")('/*! normalize.css v4.1.1 | MIT License | github.com/necolas/normalize.css */\n\n/**\n * 1. Change the default font family in all browsers (opinionated).\n * 2. Correct the line height in all browsers.\n * 3. Prevent adjustments of font size after orientation changes in IE and iOS.\n */\n\nhtml {\n  font-family: sans-serif; /* 1 */\n  line-height: 1.15; /* 2 */\n  -ms-text-size-adjust: 100%; /* 3 */\n  -webkit-text-size-adjust: 100%; /* 3 */\n}\n\n/**\n * Remove the margin in all browsers (opinionated).\n */\n\nbody {\n  margin: 0;\n}\n\n/* HTML5 display definitions\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 9-.\n * 1. Add the correct display in Edge, IE, and Firefox.\n * 2. Add the correct display in IE.\n */\n\narticle,\naside,\ndetails, /* 1 */\nfigcaption,\nfigure,\nfooter,\nheader,\nmain, /* 2 */\nmenu,\nnav,\nsection,\nsummary { /* 1 */\n  display: block;\n}\n\n/**\n * Add the correct display in IE 9-.\n */\n\naudio,\ncanvas,\nprogress,\nvideo {\n  display: inline-block;\n}\n\n/**\n * Add the correct display in iOS 4-7.\n */\n\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Add the correct display in IE 10-.\n * 1. Add the correct display in IE.\n */\n\ntemplate, /* 1 */\n[hidden] {\n  display: none;\n}\n\n/* Links\n   ========================================================================== */\n\n/**\n * 1. Remove the gray background on active links in IE 10.\n * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.\n */\n\na {\n  background-color: transparent; /* 1 */\n  -webkit-text-decoration-skip: objects; /* 2 */\n}\n\n/**\n * Remove the outline on focused links when they are also active or hovered\n * in all browsers (opinionated).\n */\n\na:active,\na:hover {\n  outline-width: 0;\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * 1. Remove the bottom border in Firefox 39-.\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Prevent the duplicate application of `bolder` by the next rule in Safari 6.\n */\n\nb,\nstrong {\n  font-weight: inherit;\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * Add the correct font style in Android 4.3-.\n */\n\ndfn {\n  font-style: italic;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/**\n * Add the correct background and color in IE 9-.\n */\n\nmark {\n  background-color: #ff0;\n  color: #000;\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10-.\n */\n\nimg {\n  border-style: none;\n}\n\n/**\n * Hide the overflow in IE.\n */\n\nsvg:not(:root) {\n  overflow: hidden;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\npre,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct margin in IE 8.\n */\n\nfigure {\n  margin: 1em 40px;\n}\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change font properties to `inherit` in all browsers (opinionated).\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font: inherit; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Restore the font weight unset by the previous rule.\n */\n\noptgroup {\n  font-weight: bold;\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`\n *    controls in Android 4.\n * 2. Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\nhtml [type="button"], /* 1 */\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button; /* 2 */\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Change the border, margin, and padding in all browsers (opinionated).\n */\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Remove the default vertical scrollbar in IE.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10-.\n * 2. Remove the padding in IE 10-.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding and cancel buttons in Chrome and Safari on OS X.\n */\n\n[type="search"]::-webkit-search-cancel-button,\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * Correct the text style of placeholders in Chrome, Edge, and Safari.\n */\n\n::-webkit-input-placeholder {\n  color: inherit;\n  opacity: 0.54;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}')||!0)&&"_c5770200",(require("insert-css")("html, body {\n  padding: 0;\n  margin: 0;\n}\n\nh1 {\n  text-align: center;\n  font-size: 42px;\n  color: #0f0e0b;\n  width: 100%;\n  margin-bottom: 15px;\n}\n\n.container {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-content: space-around;\n}\n.wrapper {\n  width: 100%;\n  align-content: space-around;\n}\n\n.config-panel {\n  align-content: space-between;\n  align-items: center;\n  display: flex;\n  width: 40%;\n  align-self: center;\n  margin: 0 auto;\n  padding: 20px 0;\n}\n\ninput {\n  align-self: center;\n  width: 80%;\n  padding: 12px 6px;\n  border: 1px solid #777;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n}\n\nbutton {\n  width: 20%;\n  padding: 12px 6px;\n  border-bottom-right-radius: 5px;\n  border-top-right-radius: 5px;\n  border: 1px solid #777;\n  border-left: 0;\n  outline: 0;\n  cursor: pointer;\n}\nbutton:hover {\n    background-color: #bbb;\n}\n.board {\n  display: flex;\n  width: 100%;\n  padding: 20px 50px;\n  align-items: center;\n  align-content: center;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n.board > table {\n  align-self: center;\n  margin: 0 auto;\n  width: 40%;\n  position: relative;\n}\n.board > table tr {\n  height: 100px;\n  background-color: #FEFFB8;\n}\n.board > table tr > td {\n  width: 33.33333%;\n  color: transparent;\n}\n.board > table tr > td:hover {\n  cursor: pointer;\n  color: #C9CAA4;\n}\n.board > table tr > td.selected,\n.board > table tr > td.selected:hover {\n  color: #333;\n}\n.board > table tr > td.marked {\n  background-color: #FFDC00;\n}\n.board > table td > span {\n  font-size: 70px;\n  margin-left: 60px;\n}\n.board > table.finished > .finish-panel {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(255, 255, 255, 0.7);\n}\n.board > table.finished > .finish-panel .clearfix {\n  position: absolute;\n  bottom: 50px;\n  width: 100%;\n}\n.board > table.finished > .finish-panel > h3 {\n  text-align: center;\n    font-size: 3em;\n}\n.board > table.finished > .finish-panel .clearfix > button:first-child {\n  min-width: 150px;\n  border-radius: 5px;\n  border: 1px solid #777;\n  float: left;\n  margin-left: 50px;\n}\n.board > table.finished > .finish-panel .clearfix > button:last-child {\n  min-width: 150px;\n  border-radius: 5px;\n  border: 1px solid #777;\n  float: right;\n  margin-right: 50px;\n}")||!0)&&"_37c21018";var logger=chooLog(),app=choo({onAction:logger.onAction,onError:logger.onError,onStateChange:logger.onStateChange});app.model(require("./models/board")),app.model(require("./models/player")),app.router(function(route){return[route("/",mainView),route("/game",gameView)]});var tree=app.start();document.body.appendChild(tree)},{"./models/board":37,"./models/player":38,"./views/game":41,"./views/main":42,choo:8,"choo-log":6,"insert-css":17}],37:[function(require,module,exports){"use strict";module.exports={namespace:"board",state:{grid:[["","",""],["","",""],["","",""]],availaiblePositions:[0,1,2,3,4,5,6,7,8],winnerLine:[],winner:""},reducers:{update:function(data,state){var grid=state.grid;grid[data.x][data.y]=data.figure;var tr=document.querySelectorAll(".board tr")[data.x],td=tr.querySelectorAll("td")[data.y];return td.classList.add("selected"),{grid:grid,availaiblePositions:data.availaible}},finish:function(data,state){return{winnerLine:data.winnerLine,winner:data.winner}},replay:function(data,state){return{grid:[["","",""],["","",""],["","",""]],availaiblePositions:[0,1,2,3,4,5,6,7,8],winnerLine:[],winner:""}}},effects:{restart:function(data,state,send,done){send("player:reset",done),send("board:replay",done),send("location:setLocation",{location:"/"},done),window.history.pushState({},null,"/")}}}},{}],38:[function(require,module,exports){"use strict";function checkWinner(grid,lastMove,lastPlayer){var winner=void 0,line=void 0;return grid[lastMove.x][lastMove.y]=lastPlayer,grid[0][0]&&""!==grid[0][0]&&grid[0][0]===grid[0][1]&&grid[0][1]===grid[0][2]&&(winner=grid[0][0],line=[[0,0],[0,1],[0,2]]),grid[1][0]&&""!==grid[1][0]&&grid[1][0]===grid[1][1]&&grid[1][1]===grid[1][2]&&(winner=grid[1][0],line=[[1,0],[1,1],[1,2]]),grid[2][0]&&""!==grid[2][0]&&grid[2][0]===grid[2][1]&&grid[2][1]===grid[2][2]&&(winner=grid[2][0],line=[[2,0],[2,1],[2,2]]),grid[0][0]&&""!==grid[0][0]&&grid[0][0]===grid[1][0]&&grid[1][0]===grid[2][0]&&(winner=grid[0][0],line=[[0,0],[1,0],[2,0]]),grid[0][1]&&""!==grid[0][1]&&grid[0][1]===grid[1][1]&&grid[1][1]===grid[2][1]&&(winner=grid[0][1],line=[[0,1],[1,1],[2,1]]),grid[0][2]&&""!==grid[0][2]&&grid[0][2]===grid[1][2]&&grid[1][2]===grid[2][2]&&(winner=grid[0][2],line=[[0,2],[1,2],[2,2]]),grid[0][0]&&""!==grid[0][0]&&grid[0][0]===grid[1][1]&&grid[1][1]===grid[2][2]&&(winner=grid[0][0],line=[[0,0],[1,1],[2,2]]),grid[0][2]&&""!==grid[0][2]&&grid[0][2]===grid[1][1]&&grid[1][1]===grid[2][0]&&(winner=grid[0][2],line=[[0,2],[1,1],[2,0]]),{winner:winner,line:line}}module.exports={namespace:"player",state:{name:"",id:"",figure:"X",points:0,multiplayer:!1},reducers:{init:function(data,state){return{name:data.player,id:"1"}},reset:function(data,state){return{name:"",id:"",figure:"X",points:0,multiplayer:!1}}},effects:{makeMove:function(data,state,send,done){var x=data.x,y=data.y,pos=3*x+y,availaiblePositions=data.availaible,index=availaiblePositions.indexOf(pos);availaiblePositions.splice(index,1),send("board:update",{x:x,y:y,figure:state.figure,availaible:availaiblePositions},done);var check=checkWinner(data.grid,{x:x,y:y},state.figure);if(check.winner&&""!==check.winner&&(console.log("The winner is "+check.winner),send("board:finish",{winnerLine:check.line,winner:check.winner},done)),!state.multiplayer&&availaiblePositions.length>0){var randomPos=Math.floor(Math.random()*availaiblePositions.length),_pos=availaiblePositions[randomPos],autoX=Math.floor(_pos/3),autoY=_pos%3;setTimeout(send("player:autoMove",{autoX:autoX,autoY:autoY,availaible:availaiblePositions,grid:data.grid},done),2e3)}},autoMove:function(data,state,send,done){var x=data.autoX,y=data.autoY,pos=3*x+y,availaiblePositions=data.availaible,index=availaiblePositions.indexOf(pos);availaiblePositions.splice(index,1);var figure="X"===state.figure?"O":"X";send("board:update",{x:x,y:y,figure:figure,availaible:availaiblePositions},done);var check=checkWinner(data.grid,{x:x,y:y},figure);check.winner&&""!==check.winner&&(console.log("The winner is "+check.winner),send("board:finish",{winnerLine:check.line,winner:check.winner},done))},join:function(data,state,send,done){send("player:init",{player:document.getElementById("player").value},done),send("location:setLocation",{location:"/game"},done),window.history.pushState({},null,"/game")}}}},{}],39:[function(require,module,exports){"use strict";function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _templateObject=_taggedTemplateLiteral(['\n  <div class="config-panel">\n    <input id="player" type="text">\n    <button onclick=',">Play</button>\n  </div>\n  "],['\n  <div class="config-panel">\n    <input id="player" type="text">\n    <button onclick=',">Play</button>\n  </div>\n  "]),html=require("choo/html"),configPlayer=function(state,send){return html(_templateObject,function(e){return send("player:join")})};module.exports=configPlayer},{"choo/html":7}],40:[function(require,module,exports){"use strict";function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _templateObject=_taggedTemplateLiteral(['\n    <div class="finish-panel">\n      <h3>','</h3>\n      <div class="clearfix">\n        <button onclick=',">Restart</button>\n        <button onclick=",">Replay</button>\n      </div>\n    </div>\n    "],['\n    <div class="finish-panel">\n      <h3>','</h3>\n      <div class="clearfix">\n        <button onclick=',">Restart</button>\n        <button onclick=",">Replay</button>\n      </div>\n    </div>\n    "]),html=require("choo/html"),finishedGame=function(state,send){if(state.board.winnerLine.length>0||0===state.board.availaiblePositions.length){var winneMessage=state.board.winner===state.player.figure?"You win!":"You lose",drawMessage="It's a draw!",message=0===state.board.winnerLine.length?drawMessage:winneMessage;return html(_templateObject,message,function(e){return send("board:restart")},function(e){return send("board:replay")})}};module.exports=finishedGame},{"choo/html":7}],41:[function(require,module,exports){"use strict";function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _templateObject=_taggedTemplateLiteral(["\n    <tbody>\n      ","\n    </tbody>"],["\n    <tbody>\n      ","\n    </tbody>"]),_templateObject2=_taggedTemplateLiteral(["\n          <tr>\n            ","\n          </tr>"],["\n          <tr>\n            ","\n          </tr>"]),_templateObject3=_taggedTemplateLiteral(['\n                <td class="'," ",'">\n                  <span onclick=',">\n                    ","\n                  </span>\n                </td>"],['\n                <td class="'," ",'">\n                  <span onclick=',">\n                    ","\n                  </span>\n                </td>"]),_templateObject4=_taggedTemplateLiteral(['\n    <div class="container">\n      <h1>Hello ','!</h1>\n      <div class="board">\n        <table class="','">\n          ',"\n          ","\n        </table>\n      </div>\n    </div>\n  "],['\n    <div class="container">\n      <h1>Hello ','!</h1>\n      <div class="board">\n        <table class="','">\n          ',"\n          ","\n        </table>\n      </div>\n    </div>\n  "]),html=require("choo/html"),finishedGame=require("./finished-game"),createBoard=function(state,send){return html(_templateObject,state.board.grid.map(function(row,x){return html(_templateObject2,row.map(function(column,y){function onClick(e){send("player:makeMove",{x:x,y:y,availaible:state.board.availaiblePositions,grid:state.board.grid})}var isSelected=function(){return""!==column?"selected":""},isMarked=function(){var markedClass="";return state.board.winnerLine&&state.board.winnerLine.length>1&&state.board.winnerLine.forEach(function(pos){markedClass+=pos[0]===x&&pos[1]===y?"marked":""}),markedClass};return html(_templateObject3,isSelected(),isMarked(),onClick,""!==column?column:state.player.figure)}))}))},gameView=function(state,prev,send){return html(_templateObject4,state.player.name,state.board.winnerLine.length>0||0===state.board.availaiblePositions.length?"finished":"",finishedGame(state,send),createBoard(state,send))};module.exports=gameView},{"./finished-game":40,"choo/html":7}],42:[function(require,module,exports){"use strict";function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _templateObject=_taggedTemplateLiteral(['\n    <div class="container">\n      <h1>Tic tac toe powered by choo</h1>\n      <hr>\n      <div class="wrapper center">\n        ',"\n      </div>\n    </div>\n  "],['\n    <div class="container">\n      <h1>Tic tac toe powered by choo</h1>\n      <hr>\n      <div class="wrapper center">\n        ',"\n      </div>\n    </div>\n  "]),html=require("choo/html"),configPlayer=require("./config-player"),mainView=function(state,prev,send){return html(_templateObject,configPlayer(state,send))};module.exports=mainView},{"./config-player":39,"choo/html":7}]},{},[36]);
